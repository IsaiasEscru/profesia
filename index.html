
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ProfesIA - Plataforma Vocacional con IA</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

  <header class="bg-indigo-600 text-white py-6 shadow-md">
    <div class="container mx-auto px-4">
      <h1 class="text-3xl font-bold">ProfesIA</h1>
      <p class="text-lg">Ayudando al mundo del futuro</p>
    </div>
  </header>

  <section class="py-10">
    <div class="container mx-auto px-4 text-center">
      <h2 class="text-2xl font-semibold mb-4">Bienvenido a tu guía vocacional con IA</h2>
      <p class="mb-6 max-w-xl mx-auto">
        ProfesIA es una plataforma diseñada para ayudarte a descubrir tu camino profesional, brindarte apoyo emocional y prepararte para una vida con propósito. Empieza respondiendo nuestro test inteligente.
      </p>
      <a href="#registro" class="bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700">Comenzar ahora</a>
    </div>
  </section>

  <section id="registro" class="bg-white py-10 border-t">
    <div class="container mx-auto px-4 max-w-md">
      <h3 class="text-xl font-bold mb-4 text-center">Registro de usuario</h3>
      <form class="bg-gray-100 p-6 rounded-lg shadow">
        <label for="curp" class="block text-sm font-medium text-gray-700 mb-2">Ingresa tu CURP:</label>
        <input type="text" id="curp" name="curp" class="w-full px-4 py-2 rounded border border-gray-300 mb-4" placeholder="Ej. GODE561231HDFRRN09" required>
        <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded hover:bg-indigo-700">Registrarme</button>
      </form>
    </div>
  </section>

  <footer class="bg-gray-100 py-6 mt-10 border-t">
    <div class="container mx-auto px-4 text-center text-sm text-gray-500">
      © 2025 ProfesIA. Proyecto impulsado por ContaIA.
    </div>
  </footer>
<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js"></script>

<script>
  // Configuración de tu Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyC84Czet86uBU5WoeTFjJhK_sGWNUjmkU",
    authDomain: "profesia-3db68.firebaseapp.com",
    projectId: "profesia-3db68",
    storageBucket: "profesia-3db68.appspot.com",
    messagingSenderId: "834026103993",
    appId: "1:834026103993:web:aa8601d98bb7899dbaa768"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // Función para calcular edad desde la CURP
  function calcularEdadDesdeCurp(curp) {
    const fechaCurp = curp.substring(4, 10); // YYMMDD
    const año = parseInt(fechaCurp.substring(0, 2), 10);
    const mes = parseInt(fechaCurp.substring(2, 4), 10) - 1;
    const dia = parseInt(fechaCurp.substring(4, 6), 10);

    const añoReal = año >= 0 && año <= 25 ? 2000 + año : 1900 + año;
    const nacimiento = new Date(añoReal, mes, dia);
    const hoy = new Date();
    let edad = hoy.getFullYear() - nacimiento.getFullYear();
    const m = hoy.getMonth() - nacimiento.getMonth();
    if (m < 0 || (m === 0 && hoy.getDate() < nacimiento.getDate())) {
      edad--;
    }
    return edad;
  }

  // Evento de envío del formulario
  document.getElementById("registroForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const curp = document.getElementById("curp").value.trim().toUpperCase();
    const nombre = document.getElementById("nombre").value.trim();
    const nivel = document.getElementById("nivel").value;
    const edad = calcularEdadDesdeCurp(curp);
    const fechaRegistro = new Date().toISOString();

    try {
      await db.collection("usuarios").doc(curp).set({
        nombre: nombre,
        nivel_educativo: nivel,
        edad: edad,
        fecha_registro: fechaRegistro
      });

      alert("Registro exitoso. Ya puedes continuar con el test.");
      window.location.href = "test.html"; // redirige al test
    } catch (error) {
      console.error("Error al guardar en Firestore:", error);
      alert("Hubo un error al registrar tus datos.");
    }
  });
</script>

</body>
</html>
